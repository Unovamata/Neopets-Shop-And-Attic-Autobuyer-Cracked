<!DOCTYPE html>
<html>
    <head>
        <title>NeoBuyer+ Purchase History</title>
        <link rel="stylesheet" type="text/css" href="../../../js/chart.css" />
        <link rel="stylesheet" type="text/css" href="../options.css" />
        <link rel="stylesheet" type="text/css" href="../table.css">
    </head>

    <body>
        <div class="center">
            <div class="enter-info">NeoBuyer+ History</div>
            <div class="rarity-info">Previous Purchases History
                <div class="autosaved">
                    <span class="sub">Total estimated profit: </span><span id="total-profit">Loading...</span><br>
                    <span class="sub">Total attempted value: </span><span id="total-value">Loading...</span><br>
                    <span class="sub">Total history entries: <span id="total-entries">Loading...</span>
                </div>
            </div>
            
            

            <center>
                <button class="tablinks button" id="table-button">Table</button>
                <button class="tablinks button" id="analytics-button"><sub></sub> Analytics <sup>beta</sup></button>

                <!-- Table -->
                <div>
                    <div class="page-navigation" id="history-navigation">
                        <button id="first-button" class="button">|< First</button>
                        <button id="prev-button" class="button"><< Previous</button>
                        <span id="page-indicator" class="rarity-info"></span>
                        <button id="next-button" class="button">Next >></button>
                        <button id="last-button" class="button">Last >|</button>
                    </div>
                    <br><br>

                    <div id="table-container" class="tabcontent table">
                        <span class="loading rarity-info">Loading...</span>
                    </div>
                </div>
                
                
                <!-- Analytics -->
                <div id="analytics-container" display="none" class="tabcontent table">
                    <div>
                        <div class="category-info">General Total Profit vs Total Attempted Value (*)</div>
                        
                        <div class="subcategory-info">
                            <canvas id="totalProfitVsAttempted"></canvas>
                        </div>
                        <span class="autosaved rarity-info sub">(*) A success ratio close to 8% is deemed excellent for NeoBuyer+.</span>
                        <span class="autosaved rarity-info sub">(*) A ratio below 8% suggests a need to reduce your AutoBuying times.</span>
                        <br><span class="autosaved rarity-info sub">(*) When adjusting your AutoBuyer times, clearing your purchase History ensures consistent ratios.</span>
                        <span class="autosaved rarity-info sub">(*) If you only go for the most profitable items, your ratio may be heavily skewed.</span>
                    </div><br><br>

                    <div>
                        <div class="category-info">Main Shops Average Purchase Ratio</div>
                        <div class="subcategory-info">
                            <canvas id="mainShopRatioChart"></canvas>
                        </div>
                    </div><br><br>

                    <div>
                        <div class="category-info">Almost Abandoned Attic Average Purchase Ratio</div>
                        <div class="subcategory-info">
                            <canvas id="atticRatioChart"></canvas>
                        </div>
                    </div><br><br>

                    <div>
                        <div class="category-info">Profit Per Hour of the Day (*)</div>
                        <div class="subcategory-info">
                            <canvas id="profitPerHour"></canvas>
                        </div>
                    </div><br><br>

                    <div>
                        <div class="category-info">Ratio Per Hour of the Day (*)</div>
                        <div class="subcategory-info">
                            <canvas id="ratioPerHour"></canvas>
                        </div>
                        <span class="autosaved rarity-info sub">(*) The likelihood of NeoBuyer+ successfully purchasing an item at a specific time increases with higher ratios.</span>
                    </div><br><br>

                    <div>
                        <div class="category-info">Most Profitable Shops</div>
                        <div class="subcategory-info">
                            <canvas id="mostProfitableShops"></canvas>
                        </div>
                    </div><br><br>

                    <div>
                        <div class="category-info">Most Commonly Bought Items</div>
                        <div class="subcategory-info">
                            <canvas id="mostCommonItemsChart"></canvas>
                        </div>
                    </div><br><br>

                    <div>
                        <div class="category-info">Most Valuable Bought Items</div>
                        <div class="subcategory-info">
                            <canvas id="mostValuableItemsChart"></canvas>
                        </div>
                    </div><br><br>

                    <div>
                        <div class="category-info">Profits Over Time</div>
                        <div class="subcategory-info">
                            <canvas id="profitsOverTime"></canvas>
                        </div>
                    </div><br><br>
                </div>
                <br>
                <button id="reset" class="button reset">Clear Purchase History</button>
            </center>
            
            
            <br><br><br>
        </div>
        
        <script src="../../../js/chart.umd.js"></script>
        <script src="../../../js/chartjs-plugin-datalabels.min.js"></script>
        <script src="../../../js/sortable.js"></script>
        <script src="../DisplayChunkData.js"></script>
        <script src="../../common/utils.js"></script>
        <script src="../../toolbar.js"></script>
        <script src="../../../js/jquery.js"></script>
        <script src="../../../js/moment.js"></script>
        <script src="../../../js/moment-timezone-with-data.js"></script>
        <script src="../../common/default_items.js"></script>
        <script src="../optionsPage.js"></script>
        <script src="../../common/item_db.js"></script>
        <script src="history.js"></script>
    </body>
</html>